<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JCAI Notifications - Working Edge Solutions</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #0066cc;
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .test-section h3 {
            margin-top: 0;
            color: #333;
        }

        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }

        button:hover {
            background: #0052a3;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            white-space: pre-line;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #cce7ff;
            color: #004085;
            border: 1px solid #b8daff;
        }

        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            max-height: 300px;
            font-size: 12px;
        }

        .user-id {
            font-family: monospace;
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .btn-alt {
            background: #ff6b35;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        /* Custom In-Page Notification Styles */
        .custom-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            background: #ffffff;
            border: 2px solid #0066cc;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 10000;
            transform: translateX(400px);
            transition: transform 0.3s ease-in-out;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .custom-notification.show {
            transform: translateX(0);
        }

        .custom-notification .notification-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: #0066cc;
        }

        .custom-notification .notification-icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .custom-notification .notification-title {
            flex: 1;
            font-size: 16px;
        }

        .custom-notification .notification-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
            padding: 0;
            margin: 0;
            width: 24px;
            height: 24px;
        }

        .custom-notification .notification-body {
            color: #333;
            font-size: 14px;
            line-height: 1.4;
        }

        .custom-notification .notification-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .custom-notification .notification-actions button {
            flex: 1;
            padding: 8px 16px;
            font-size: 12px;
            margin: 0;
        }

        /* Toast notification styles */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            width: 350px;
        }

        .toast {
            background: #333;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 10px;
            transform: translateX(400px);
            transition: transform 0.3s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: #28a745;
        }

        .toast.error {
            background: #dc3545;
        }

        .toast.warning {
            background: #ffc107;
            color: #333;
        }

        .toast.info {
            background: #17a2b8;
        }

        /* Toast notification styles (updated) */
        .toast-notification {
            background: #2d3748;
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 10px;
            transform: translateX(400px);
            transition: transform 0.3s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }

        .toast-notification:hover {
            transform: translateX(-5px);
        }

        .toast-notification .toast-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 14px;
        }

        .toast-notification .toast-body {
            font-size: 13px;
            line-height: 1.4;
            color: #e2e8f0;
        }

        .toast-notification .toast-footer {
            font-size: 11px;
            color: #a0aec0;
            margin-top: 8px;
            font-style: italic;
        }

        .toast-notification .toast-close {
            background: none;
            border: none;
            color: #a0aec0;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            margin: 0;
            width: 20px;
            height: 20px;
        }

        .toast-notification .toast-close:hover {
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>‚úÖ JCAI Notifications - Edge Compatible Solutions</h1>

        <div class="test-section">
            <h3>üìã Test Information</h3>
            <p><strong>Server:</strong> http://localhost:8000</p>
            <p><strong>Test User ID:</strong> <span class="user-id">edge-1749460706591-hh3bdgu8</span></p>
            <p><strong>Test Issue:</strong> JCAI-124</p>
        </div>

        <div class="test-section">
            <h3>‚ö†Ô∏è Protocol & Browser Detection</h3>
            <div id="protocol-info" class="status info">
                <script>
                    const isEdge = navigator.userAgent.includes('Edg');
                    const protocol = window.location.protocol;

                    document.write(`üåê Protocol: ${protocol}`);
                    document.write(`\nüß≠ Browser: ${isEdge ? 'Microsoft Edge' : 'Other'}`);

                    if (protocol === 'file:') {
                        document.write('\n‚ö†Ô∏è WARNING: file:// protocol detected. Edge may block notifications.');
                        document.write('\nüí° Solution: Use HTTP server (serve_test_page.ps1)');
                    } else {
                        document.write('\n‚úÖ HTTP protocol - good for notifications!');
                    }
                </script>
            </div>
        </div>

        <div class="test-section">
            <h3>üö´ Edge Popup Blocker Detection</h3>
            <button onclick="detectPopupBlocker()" class="btn-warning">üîç Check Popup Blocker</button>
            <button onclick="showPopupBlockerHelp()" class="btn-alt">üìã Show Popup Blocker Fix</button>
            <div id="popup-blocker-status" class="status info" style="display:none;"></div>
            <div id="popup-blocker-help" class="status info" style="display:none;"></div>
        </div>
        <div class="test-section">
            <h3>üîê Step 1: Check Current Status</h3>
            <button onclick="checkNotificationPermission()">üîç Check Permission Status</button>
            <button onclick="checkAllNotificationSystems()" class="btn-success">‚úÖ Test All Working Methods</button>

            <div id="permission-status" class="status info" style="display:none;"></div>
            <div id="notification-systems-status" class="status info" style="display:none;"></div>
        </div>

        <div class="test-section" style="opacity: 0.6;">
            <h3>‚ùå Browser Popup Methods (Blocked by Edge)</h3>
            <p style="color: #666; font-style: italic;">These methods are blocked by Edge's popup blocker. Skip this
                section and use the alternatives below.</p>
            <button onclick="openEdgeSettings()" class="btn-success" disabled>‚öôÔ∏è Open Edge Settings (Optional)</button>
            <button onclick="requestNotificationPermission()" disabled style="background: #ccc;">üîí Request Permission
                (Blocked)</button>

            <div id="permission-help" class="status info" style="display:none;"></div>
        </div>
        <div class="test-section">
            <h3>üåê Step 3: Test Server Connection (Optional)</h3>
            <button onclick="testServerConnection()">Test Server Health</button>
            <div id="server-status" class="status info" style="display:none;"></div>
        </div>
        <div class="test-section">
            <h3>üì® Step 4: Backend Integration (Advanced)</h3>
            <button onclick="createTestNotification()">Create Browser Notification</button>
            <div id="create-status" class="status info" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üì• Step 4: Check Pending Notifications</h3>
            <button onclick="checkPendingNotifications()">Check Pending</button>
            <button onclick="clearNotifications()">Clear All</button>
            <div id="pending-status" class="status info" style="display:none;"></div>
            <pre id="pending-data" style="display:none;"></pre>
        </div>

        <div class="test-section">
            <h3>üíª Step 5: Test Direct Browser Notification</h3>
            <button onclick="showBrowserNotification()">Show Browser Notification</button>
            <button onclick="testBasicNotification()" class="btn-alt">Test Basic Notification</button>
            <div id="browser-status" class="status info" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üéØ Step 6: Test Jira Notification</h3>
            <button onclick="testJiraNotification()">Test Jira Comment Notification</button>
            <div id="jira-status" class="status info" style="display:none;"></div>
        </div>
        <div class="test-section" style="border: 3px solid #28a745; background: #f8fff8;">
            <h3>üéØ Step 2: Try the WORKING Notification Methods</h3>
            <p style="color: #155724; font-weight: bold;">‚úÖ These methods work perfectly in Edge without popup blockers!
            </p> <button onclick="showPendingToastNotifications()" class="btn-success">üçû Show Toast Notification
                ‚≠ê</button>
            <button onclick="showCustomNotification()" class="btn-success">ÔøΩ Show Custom DIV Notification ‚≠ê</button>
            <button onclick="testInlineNotification()" class="btn-warning">üìã Test Inline Notification ‚≠ê</button>
            <button onclick="enableCustomNotificationSystem()" style="background: #ff9800;">üöÄ Enable Full Custom
                System</button>
            <button onclick="stopCustomNotificationSystem()" style="background: #dc3545;">üõë Stop Notifications</button>
            <button onclick="testCustomNotificationWorkflow()" style="background: #9c27b0;">üß™ Test Complete
                Workflow</button>

            <div id="custom-notification-status" class="status info" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üìä Notification System Status</h3>
            <button onclick="checkAllNotificationSystems()" style="background: #17a2b8;">üîç Check All Systems</button>
            <div id="system-status" class="status info" style="display:none;"></div>
            <div id="system-details" style="display:none;">
                <h4>System Details:</h4>
                <ul id="system-list"></ul>
            </div>
        </div>

        <div class="test-section" style="border: 2px solid #007bff; background: #f0f8ff;">
            <h3>üí° Solution Summary</h3>
            <p style="color: #004085; font-weight: bold;">‚úÖ <strong>SOLVED:</strong> Edge popup blocker was preventing
                browser notifications.</p>
            <p style="color: #155724;"><strong>‚úÖ WORKING METHODS:</strong></p>
            <ul style="color: #155724;">
                <li><strong>üçû Toast Notifications</strong> - Custom styled notifications that slide in from the corner
                </li>
                <li><strong>üì± DIV Notifications</strong> - Custom notification boxes that appear on the page</li>
                <li><strong>üìã Inline Notifications</strong> - Status messages that appear directly in the page content
                </li>
                <li><strong>üîó Jira Comments</strong> - Notifications via Jira issue mentions (backend working)</li>
            </ul>
            <p style="color: #721c24;"><strong>‚ùå BLOCKED:</strong> Standard browser popup notifications (due to Edge
                popup blocker)</p>
        </div>

        <div class="test-section" style="border: 2px solid #dc3545; background: #fff5f5;">
            <h3>üêõ Debug & Test Basic Functions</h3>
            <button onclick="debugToastTest()" style="background: #dc3545;">üß™ Simple Toast Test</button>
            <button onclick="debugConsoleTest()" style="background: #6c757d;">üìù Console Test</button>
            <button onclick="debugContainerTest()" style="background: #fd7e14;">üîç Container Test</button>
            <div id="debug-status" class="status info" style="display:none;"></div>
        </div>
    </div>

    <!-- Custom Notification Containers -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Custom DIV Notification (initially hidden) -->
    <div id="custom-notification" class="custom-notification">
        <div class="notification-header">
            <span class="notification-icon">üîî</span>
            <span class="notification-title" id="notification-title">Notification</span>
            <button class="notification-close" onclick="hideCustomNotification()">√ó</button>
        </div>
        <div class="notification-body" id="notification-body">
            This is a custom notification that bypasses popup blockers!
        </div>
        <div class="notification-actions">
            <button onclick="handleNotificationAction('allow')" class="btn-success">Allow</button>
            <button onclick="handleNotificationAction('deny')" style="background: #dc3545;">Deny</button>
        </div>
    </div>
    <script>
        const API_BASE = 'http://localhost:8000/api';
        const TEST_USER_ID = 'edge-1749460706591-hh3bdgu8';

        // Global variables for notification system
        let notificationPollingInterval = null;
        let customNotificationSystem = false;

        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
            element.style.display = 'block';
        }

        function showData(elementId, data) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
            element.style.display = 'block';
        }

        async function checkNotificationPermission() {
            if (!('Notification' in window)) {
                showStatus('permission-status', 'This browser does not support notifications', 'error');
                return;
            }

            const permission = Notification.permission;
            const isEdge = navigator.userAgent.includes('Edg');

            console.log('üîç Permission Check:', {
                permission,
                protocol: window.location.protocol,
                origin: window.location.origin,
                userAgent: navigator.userAgent,
                isEdge
            });

            let message = `üîî Current permission: ${permission}`;
            message += `\nüß≠ Browser: ${isEdge ? 'Microsoft Edge' : 'Other browser'}`;
            message += `\nüåê Protocol: ${window.location.protocol}`;

            showStatus('permission-status', message,
                permission === 'granted' ? 'success' : (permission === 'denied' ? 'error' : 'info'));

            if (permission !== 'granted') {
                showPermissionHelp();
            } else {
                document.getElementById('permission-help').style.display = 'none';
            }
        }

        function showPermissionHelp() {
            const helpMessage = `üìù Troubleshooting Guide:

üîç 1. Check address bar: Look for a üîî or üîí icon next to the URL
üîÑ 2. Try alternative method: Use the "Try Alternative Method" button
‚öôÔ∏è 3. Edge Settings: Click "Open Edge Settings" to manually allow
üîÑ 4. Refresh page: Sometimes helps reset the permission state
üåê 5. Try different URL: Use edge://settings/content/notifications

‚ùì Common Issues:
‚Ä¢ Edge blocked notifications for this site
‚Ä¢ Notifications disabled globally in Edge
‚Ä¢ First-time permission request was missed
‚Ä¢ Site is in Edge's blocked list`;

            showStatus('permission-help', helpMessage, 'info');
        }

        async function requestNotificationPermission() {
            if (!('Notification' in window)) {
                showStatus('permission-status', 'This browser does not support notifications', 'error');
                return;
            }

            document.getElementById('permission-help').style.display = 'none';

            try {
                console.log('üîî Requesting notification permission...');
                showStatus('permission-status', 'üîÑ Requesting permission... Look for popup in Edge!\n(Check address bar for notification icon)', 'info');

                // Small delay to ensure proper user gesture registration
                await new Promise(resolve => setTimeout(resolve, 200));

                const permission = await Notification.requestPermission();
                console.log('üìù Permission result:', permission);

                if (permission === 'granted') {
                    showStatus('permission-status', '‚úÖ SUCCESS! Permission granted. Testing notification...', 'success');
                    setTimeout(() => testNotificationImmediately(), 500);
                } else if (permission === 'denied') {
                    showStatus('permission-status', '‚ùå Permission denied. You may need to manually enable in Edge settings.', 'error');
                    showPermissionHelp();
                } else {
                    showStatus('permission-status', `‚ö†Ô∏è Permission result: ${permission}\nTry alternative methods below.`, 'error');
                    showPermissionHelp();
                }
            } catch (error) {
                console.error('üí• Permission request error:', error);
                showStatus('permission-status', `‚ùå Error: ${error.message}\nTry alternative methods below.`, 'error');
                showPermissionHelp();
            }
        }

        async function requestPermissionAlternative() {
            if (!('Notification' in window)) {
                showStatus('permission-status', 'This browser does not support notifications', 'error');
                return;
            }

            try {
                showStatus('permission-status', 'üîÑ Trying alternative permission method...', 'info');

                // Method: Legacy callback approach for older Edge compatibility
                const permission = await new Promise((resolve) => {
                    if (Notification.permission !== 'default') {
                        resolve(Notification.permission);
                        return;
                    }

                    // Try callback-based request for older Edge versions
                    try {
                        const result = Notification.requestPermission((perm) => {
                            resolve(perm);
                        });

                        // Handle modern promise-based result
                        if (result && typeof result.then === 'function') {
                            result.then(resolve).catch(() => resolve('denied'));
                        }
                    } catch (e) {
                        console.warn('Legacy method failed:', e);
                        resolve('denied');
                    }
                });

                console.log('üîÑ Alternative method result:', permission);

                if (permission === 'granted') {
                    showStatus('permission-status', '‚úÖ Alternative method successful!', 'success');
                    setTimeout(() => testNotificationImmediately(), 500);
                } else {
                    showStatus('permission-status', `‚ùå Alternative method result: ${permission}`, 'error');
                    showPermissionHelp();
                }
            } catch (error) {
                console.error('üí• Alternative method error:', error);
                showStatus('permission-status', `‚ùå Alternative method failed: ${error.message}`, 'error');
                showPermissionHelp();
            }
        }

        function openEdgeSettings() {
            showStatus('permission-status', 'üîó Opening Edge notification settings...', 'info');

            try {
                // Try multiple Edge settings URLs
                const settingsUrls = [
                    'edge://settings/content/notifications',
                    'ms-settings:privacy-notifications',
                    'edge://settings/content'
                ];

                // Open the first one
                window.open(settingsUrls[0], '_blank');

                setTimeout(() => {
                    showStatus('permission-status', `üìã Manual steps in Edge settings:

1. Look for 'localhost:3000' in the notifications list
2. If found, change from 'Block' ‚ûú 'Allow'
3. If not found, click 'Add' and enter 'http://localhost:3000'
4. Set to 'Allow'
5. Come back here and click 'Check Permission'

Alternative: Go to Edge menu (‚ãØ) ‚ûú Settings ‚ûú Site permissions ‚ûú Notifications`, 'info');
                }, 1000);

            } catch (error) {
                showStatus('permission-status', `üìã Please follow these manual steps:

1. Open Edge Settings: Click menu (‚ãØ) ‚ûú Settings
2. Go to: Cookies and site permissions ‚ûú Notifications
3. Under 'Allow': Add 'http://localhost:3000'
4. Refresh this page and try again

Edge Settings URL: edge://settings/content/notifications`, 'info');
            }
        }

        function checkAddressBarIcon() {
            showStatus('permission-status', `üîç Check the address bar (URL bar) for notification icons:

üîî = Notifications allowed or available
üîí = Site security settings (may include notifications)
‚ö†Ô∏è = Blocked content or permissions
üõ°Ô∏è = Enhanced security mode

Click any notification icon in the address bar to:
‚Ä¢ Allow/block notifications for this site
‚Ä¢ Manage site permissions
‚Ä¢ Reset notification settings

If you see a notification icon, click it and select 'Allow'.`, 'info');
        }

        function detectPopupBlocker() {
            const isEdge = navigator.userAgent.includes('Edg');

            // Try to detect popup blocker by attempting to open a test window
            let popupBlocked = false;
            try {
                const testWindow = window.open('', '_blank', 'width=1,height=1');
                if (!testWindow || testWindow.closed || typeof testWindow.closed == 'undefined') {
                    popupBlocked = true;
                } else {
                    testWindow.close();
                }
            } catch (e) {
                popupBlocked = true;
            }

            let message = `üîç Popup Blocker Detection Results:\n`;
            message += `üß≠ Browser: ${isEdge ? 'Microsoft Edge' : 'Other browser'}\n`;
            message += `üö´ Popup Blocker: ${popupBlocked ? 'DETECTED (Likely blocking notification permissions)' : 'Not detected'}\n`;

            if (popupBlocked && isEdge) {
                message += `\n‚ö†Ô∏è ISSUE FOUND: Edge popup blocker is likely preventing notification permission dialogs!\n`;
                message += `üìã This explains why clicking "Request Permission" shows no popup.`;
                showStatus('popup-blocker-status', message, 'error');
                showPopupBlockerHelp();
            } else if (popupBlocked) {
                message += `\n‚ö†Ô∏è Popup blocker detected - this may interfere with notification permissions.`;
                showStatus('popup-blocker-status', message, 'error');
            } else {
                message += `\n‚úÖ No popup blocker interference detected.`;
                showStatus('popup-blocker-status', message, 'success');
            }
        }

        function showPopupBlockerHelp() {
            const helpMessage = `üîß EDGE POPUP BLOCKER FIX - Choose ONE method:

üéØ METHOD 1: Temporarily Allow Popups (Easiest)
1. Click the address bar üîó icon (left of URL)
2. Look for "Pop-ups blocked" or similar message
3. Click "Allow" or "Always allow"
4. Refresh this page and try "Request Permission" again

üéØ METHOD 2: Edge Settings (Permanent)
1. Edge menu (‚ãØ) ‚Üí Settings
2. Go to: Cookies and site permissions ‚Üí Pop-ups and redirects
3. Under "Allow" section, click "Add"
4. Enter: http://localhost:3000
5. Click "Add"
6. Refresh this page and try again

üéØ METHOD 3: Manual Notification Permission (Bypass)
1. Edge menu (‚ãØ) ‚Üí Settings
2. Go to: Cookies and site permissions ‚Üí Notifications
3. Under "Allow" section, click "Add"
4. Enter: http://localhost:3000
5. Set to "Allow"
6. Refresh page - permission should be "granted"

üéØ METHOD 4: Address Bar Permission Icon
1. Look for üîî, üîí, or ‚ö†Ô∏è icons in the address bar
2. Click any notification/permission icon
3. Select "Allow notifications"

‚ö° QUICK TEST: After any method, click "Check Permission" button below.
If it shows "granted", then click "Test Basic Notification"!`;

            showStatus('popup-blocker-help', helpMessage, 'info');
        }

        function requestNotificationPermissionWithPopupCheck() {
            // First check for popup blocker
            detectPopupBlocker();

            // Small delay to show popup blocker results, then try permission request
            setTimeout(() => {
                requestNotificationPermission();
            }, 1000);
        }

        async function testNotificationImmediately() {
            if (Notification.permission === 'granted') {
                try {
                    const testNotification = new Notification('üéâ Success! Edge Notifications Working!', {
                        body: 'Notification permissions are now working correctly in Microsoft Edge!',
                        icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDMTMuMSAyIDE0IDIuOSAxNCA0VjVDMTcuMyA1LjcgMjAgOC4xIDIwIDExVjE2TDIyIDE4VjE5SDJWMThMNCAxNlYxMUM0IDguMSA2LjcgNS43IDEwIDVWNEMxMCAyLjkgMTAuOSAyIDEyIDJaTTEwIDIxSDE0QzE0IDIyLjEgMTMuMSAyMyAxMiAyM0MxMC45IDIzIDEwIDIyLjEgMTAgMjFaIiBmaWxsPSIjNDA5NmZmIi8+Cjwvc3ZnPgo=',
                        requireInteraction: false,
                        tag: 'edge-test-notification'
                    });

                    testNotification.onclick = function () {
                        console.log('‚úÖ Test notification clicked!');
                        this.close();
                        showStatus('permission-status', '‚úÖ Perfect! Notification clicked. Everything is working!', 'success');
                    };

                    setTimeout(() => {
                        if (testNotification) {
                            testNotification.close();
                        }
                    }, 5000);

                    showStatus('permission-status', '‚úÖ Test notification sent! Check your screen for the popup.', 'success');
                } catch (notificationError) {
                    console.error('üí• Test notification error:', notificationError);
                    showStatus('permission-status', `‚ùå Permission granted but notification failed: ${notificationError.message}`, 'error');
                }
            }
        }

        function testBasicNotification() {
            if (Notification.permission !== 'granted') {
                showStatus('browser-status', '‚ùå Please grant notification permission first (Step 1)', 'error');
                return;
            }

            try {
                const basicNotification = new Notification('üîî Basic Test', {
                    body: 'This is a simple test notification.',
                    requireInteraction: false
                });

                basicNotification.onclick = () => {
                    basicNotification.close();
                    showStatus('browser-status', '‚úÖ Basic notification test successful!', 'success');
                };

                setTimeout(() => basicNotification.close(), 3000);
                showStatus('browser-status', 'üîî Basic notification sent!', 'success');
            } catch (error) {
                showStatus('browser-status', `‚ùå Basic notification failed: ${error.message}`, 'error');
            }
        }

        async function testServerConnection() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();

                if (response.ok) {
                    showStatus('server-status', '‚úÖ Server is running and healthy!', 'success');
                } else {
                    showStatus('server-status', `‚ùå Server error: ${response.status}`, 'error');
                }
            } catch (error) {
                showStatus('server-status', `‚ùå Connection failed: ${error.message}`, 'error');
            }
        }

        async function createTestNotification() {
            try {
                const response = await fetch(`${API_BASE}/notifications/browser/test/${TEST_USER_ID}`, {
                    method: 'POST'
                });
                const data = await response.json();

                if (response.ok && data.success) {
                    showStatus('create-status', `‚úÖ Notification created: ${data.notification_id}`, 'success');
                } else {
                    showStatus('create-status', `‚ùå Failed: ${data.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus('create-status', `‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function checkPendingNotifications() {
            try {
                const response = await fetch(`${API_BASE}/notifications/browser/pending/${TEST_USER_ID}`);
                const data = await response.json();

                if (response.ok) {
                    showStatus('pending-status', `üì• Found ${data.total_count} pending notifications`, 'success');
                    showData('pending-data', data);
                } else {
                    showStatus('pending-status', '‚ùå Error checking notifications', 'error');
                }
            } catch (error) {
                showStatus('pending-status', `‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function clearNotifications() {
            try {
                const pendingResponse = await fetch(`${API_BASE}/notifications/browser/pending/${TEST_USER_ID}`);
                const pendingData = await pendingResponse.json();

                if (pendingData.notifications && pendingData.notifications.length > 0) {
                    for (const notification of pendingData.notifications) {
                        await fetch(`${API_BASE}/notifications/browser/${notification.id}`, {
                            method: 'DELETE'
                        });
                    }
                    showStatus('pending-status', 'üóëÔ∏è All notifications cleared', 'success');
                    document.getElementById('pending-data').style.display = 'none';
                } else {
                    showStatus('pending-status', '‚ÑπÔ∏è No notifications to clear', 'info');
                }
            } catch (error) {
                showStatus('pending-status', `‚ùå Error clearing: ${error.message}`, 'error');
            }
        }

        async function showBrowserNotification() {
            if (Notification.permission !== 'granted') {
                showStatus('browser-status', '‚ùå Notification permission not granted. Please complete Step 1 first.', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/notifications/browser/pending/${TEST_USER_ID}`);
                const data = await response.json();

                if (data.notifications && data.notifications.length > 0) {
                    const notification = data.notifications[0];

                    const browserNotification = new Notification(notification.title, {
                        body: notification.body,
                        icon: notification.icon || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDMTMuMSAyIDE0IDIuOSAxNCA0VjVDMTcuMyA1LjcgMjAgOC4xIDIwIDExVjE2TDIyIDE4VjE5SDJWMThMNCAxNlYxMUM0IDguMSA2LjcgNS43IDEwIDVWNEMxMCAyLjkgMTAuOSAyIDEyIDJaTTEwIDIxSDE0QzE0IDIyLjEgMTMuMSAyMyAxMiAyM0MxMC45IDIzIDEwIDIyLjEgMTAgMjFaIiBmaWxsPSIjNDA5NmZmIi8+Cjwvc3ZnPgo=',
                        badge: notification.badge,
                        requireInteraction: notification.requireInteraction || false,
                        tag: notification.tag
                    });

                    browserNotification.onclick = function () {
                        console.log('üì± Notification clicked:', notification);
                        if (notification.data?.issue_url) {
                            window.open(notification.data.issue_url, '_blank');
                        }
                        this.close();
                        showStatus('browser-status', '‚úÖ Notification clicked! Perfect!', 'success');
                    };

                    showStatus('browser-status', 'üîî Browser notification displayed! Look for the popup.', 'success');

                    // Auto-cleanup after 5 seconds
                    setTimeout(async () => {
                        try {
                            await fetch(`${API_BASE}/notifications/browser/${notification.id}`, {
                                method: 'DELETE'
                            });
                        } catch (e) {
                            console.warn('Cleanup failed:', e);
                        }
                    }, 5000);
                } else {
                    showStatus('browser-status', '‚ÑπÔ∏è No pending notifications. Create one first using Step 3.', 'info');
                }
            } catch (error) {
                showStatus('browser-status', `‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function testJiraNotification() {
            try {
                const response = await fetch(`${API_BASE}/notifications/jira/test/${TEST_USER_ID}`, {
                    method: 'POST'
                });
                const data = await response.json();

                if (response.ok && data.test_result?.success) {
                    showStatus('jira-status', '‚úÖ Jira notification sent! Check JCAI-124 comments in Jira.', 'success');
                } else {
                    showStatus('jira-status', `‚ùå Jira test failed: ${data.test_result?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus('jira-status', `‚ùå Error: ${error.message}`, 'error');
            }
        }        // Auto-check on page load
        window.addEventListener('load', () => {
            checkNotificationPermission();
            // Auto-detect popup blocker if Edge
            if (navigator.userAgent.includes('Edg')) {
                setTimeout(() => {
                    detectPopupBlocker();
                }, 1000);
            }
        });

        // Custom notification methods
        function showCustomNotification(title = 'üîî Browser Notification Request', body = 'This site wants to show you notifications. This custom notification bypasses popup blockers!') {
            const notification = document.getElementById('custom-notification');
            const titleElement = document.getElementById('notification-title');
            const bodyElement = document.getElementById('notification-body');

            titleElement.textContent = title;
            bodyElement.textContent = body;

            // Show the notification
            notification.classList.add('show');

            // Auto-hide after 10 seconds if no action
            setTimeout(() => {
                if (notification.classList.contains('show')) {
                    hideCustomNotification();
                }
            }, 10000);

            showStatus('custom-notification-status', '‚úÖ Custom DIV notification displayed at bottom-right!', 'success');
        }

        function hideCustomNotification() {
            const notification = document.getElementById('custom-notification');
            notification.classList.remove('show');
        }

        function handleNotificationAction(action) {
            hideCustomNotification();

            if (action === 'allow') {
                showStatus('custom-notification-status', '‚úÖ User clicked Allow! In a real app, this would grant permissions.', 'success');
                showToastNotification('success', 'üéâ Permission Granted!', 'Custom notification system would now be active.');

                // Try to request actual browser permission now
                setTimeout(() => {
                    requestNotificationPermission();
                }, 1000);
            } else {
                showStatus('custom-notification-status', '‚ùå User clicked Deny. Custom notification system would respect this choice.', 'error');
                showToastNotification('error', 'üö´ Permission Denied', 'User chose not to receive notifications.');
            }
        }

        async function showPendingToastNotifications() {
            try {
                const response = await fetch(`${API_BASE}/notifications/browser/pending/${TEST_USER_ID}`);
                const data = await response.json();

                if (data.notifications && data.notifications.length > 0) {
                    data.notifications.forEach((notification, index) => {
                        // Show with a small delay to avoid overlap
                        setTimeout(() => {
                            if (notification.data && notification.data.issue_url) {
                                showToastNotificationWithClick(notification.title, notification.body, notification);
                            } else {
                                showToastNotification('info', notification.title, notification.body);
                            }
                        }, index * 500);
                    });

                    showStatus('custom-notification-status', `‚úÖ Showing ${data.notifications.length} pending toast notifications!`, 'success');
                } else {
                    showToastNotification('info', 'üìã No Pending Notifications', 'No pending notifications found. You can create one using the backend integration section.');
                    showStatus('custom-notification-status', '‚ÑπÔ∏è No pending notifications found', 'info');
                }
            } catch (error) {
                showToastNotification('error', '‚ùå Error', `Failed to fetch notifications: ${error.message}`);
                showStatus('custom-notification-status', `‚ùå Error: ${error.message}`, 'error');
            }
        }

        function showToastNotification(type = 'info', title = 'Notification', message = 'This is a toast notification!') {
            const container = document.getElementById('toast-container');

            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 8px;">${title}</div>
                <div style="font-size: 14px;">${message}</div>
            `;

            // Add to container
            container.appendChild(toast);

            // Show with animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            // Auto-hide after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (container.contains(toast)) {
                        container.removeChild(toast);
                    }
                }, 300);
            }, 5000);
        }

        function showToastNotificationWithClick(title, message, notificationData = null) {
            const container = document.getElementById('toast-container');
            if (!container) {
                console.error('Toast container not found');
                return;
            }

            const toast = document.createElement('div');
            toast.className = 'toast-notification toast-notification';

            // Make it clickable if we have notification data
            if (notificationData && notificationData.data && notificationData.data.issue_url) {
                toast.style.cursor = 'pointer';
                toast.onclick = function () {
                    window.open(notificationData.data.issue_url, '_blank');
                    toast.remove();
                    console.log('üîó Notification clicked, opening:', notificationData.data.issue_url);
                };
            }

            toast.innerHTML = `
                <div class="toast-header">
                    <strong>${title}</strong>
                    <button onclick="this.parentElement.parentElement.remove()" class="toast-close">&times;</button>
                </div>
                <div class="toast-body">${message}</div>
                ${notificationData && notificationData.data && notificationData.data.issue_url ?
                    `<div class="toast-footer" style="font-size: 12px; color: #666; margin-top: 8px;">Click to open in Jira</div>` :
                    ''}
            `;

            container.appendChild(toast);

            // Auto-remove after 8 seconds (longer for user to click)
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 8000);
        }

        function testInlineNotification() {
            // Create an inline notification that appears in the page
            const testSection = document.querySelector('.test-section:last-of-type');

            // Remove any existing inline notification
            const existing = document.getElementById('inline-notification');
            if (existing) {
                existing.remove();
            }

            // Create new inline notification
            const inlineNotification = document.createElement('div');
            inlineNotification.id = 'inline-notification';
            inlineNotification.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
                border-radius: 12px;
                margin-top: 15px;
                box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.2);
                animation: slideInUp 0.5s ease-out;
            `;

            inlineNotification.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                    <span style="font-size: 24px; margin-right: 12px;">üîî</span>
                    <strong style="font-size: 18px;">JCAI Notification System</strong>
                </div>
                <div style="margin-bottom: 15px; opacity: 0.9;">
                    New issue assigned to you: <strong>JCAI-124</strong><br>
                    <em>"Fix notification system for Edge browser"</em>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="this.parentElement.parentElement.style.display='none'; showToastNotification('success', '‚úÖ Acknowledged', 'You acknowledged the notification!');"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                        ‚úì Acknowledge
                    </button>
                    <button onclick="this.parentElement.parentElement.style.display='none'; window.open('https://your-jira-instance.com/browse/JCAI-124', '_blank');"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
                        üîó Open Issue
                    </button>
                </div>
            `;

            // Add animation keyframes if not already added
            if (!document.getElementById('custom-animations')) {
                const style = document.createElement('style');
                style.id = 'custom-animations';
                style.textContent = `
                    @keyframes slideInUp {
                        from { transform: translateY(50px); opacity: 0; }
                        to { transform: translateY(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            } testSection.appendChild(inlineNotification);
            showStatus('custom-notification-status', 'üìã Inline notification created! This simulates a Jira issue notification.', 'success');
        }

        async function requestPermissionWithCustomFallback() {
            console.log('üîß Smart Permission Request started');
            showStatus('custom-notification-status', 'üîß Trying smart permission request...', 'info');

            if (!('Notification' in window)) {
                console.log('‚ùå Browser does not support Notification API');
                showCustomNotification('‚ùå Browser Not Supported', 'This browser does not support notifications. Using custom notification system instead.');
                showStatus('custom-notification-status', '‚ùå Browser not supported - using custom notifications', 'error');
                return;
            }

            const currentPermission = Notification.permission;
            console.log('üîç Current permission:', currentPermission);

            if (currentPermission === 'granted') {
                console.log('‚úÖ Permission already granted');
                showToastNotification('success', '‚úÖ Already Granted!', 'Notifications are already enabled.');
                showStatus('custom-notification-status', '‚úÖ Permission already granted!', 'success');
                return;
            }

            if (currentPermission === 'denied') {
                console.log('üö´ Permission was previously denied');
                showCustomNotification('üö´ Permission Previously Denied', 'Browser notifications are blocked. Using custom notification fallback.');
                showStatus('custom-notification-status', 'üö´ Permission denied - using custom fallback', 'error');
                return;
            }

            try {
                console.log('üîÑ Attempting to request browser permission...');
                showStatus('custom-notification-status', 'üîÑ Requesting browser permission... (look for popup)', 'info');

                // Add a timeout to catch stuck permission requests
                const permissionPromise = Notification.requestPermission();
                const timeoutPromise = new Promise((resolve) => {
                    setTimeout(() => resolve('timeout'), 3000); // 3 second timeout
                });

                const permission = await Promise.race([permissionPromise, timeoutPromise]);
                console.log('üìù Permission result:', permission);

                if (permission === 'granted') {
                    console.log('üéâ Permission granted successfully!');
                    showToastNotification('success', 'üéâ Success!', 'Browser notifications are now enabled!');
                    showStatus('custom-notification-status', '‚úÖ Browser permission granted!', 'success');
                    setTimeout(() => testNotificationImmediately(), 500);
                } else if (permission === 'timeout') {
                    console.log('‚è∞ Permission request timed out - likely blocked by popup blocker');
                    showCustomNotification('‚è∞ Request Timed Out', 'Permission popup may be blocked. Using custom notification system as fallback.');
                    showStatus('custom-notification-status', '‚è∞ Request timed out - using custom fallback', 'error');
                } else {
                    console.log('üîÑ Permission not granted, using fallback');
                    showCustomNotification('üîÑ Fallback Mode', 'Browser permission not granted. Using custom notification system as fallback.');
                    showStatus('custom-notification-status', `üîÑ Permission result: ${permission} - using custom fallback`, 'error');
                }
            } catch (error) {
                console.error('üí• Permission request error:', error);
                showCustomNotification('‚ö†Ô∏è Permission Error', 'Browser permission request failed. Using custom notification system as fallback.');
                showStatus('custom-notification-status', `‚ùå Error: ${error.message} - using custom fallback`, 'error');
            }
        }

        // Custom notification system that bypasses all browser restrictions
        async function enableCustomNotificationSystem() {
            showStatus('custom-notification-status', 'üîß Enabling custom notification system...', 'info');

            try {
                // Store user preference for custom notifications
                localStorage.setItem('jcai-custom-notifications', 'enabled');
                customNotificationSystem = true;

                // Test the custom system
                showToastNotification('success', '‚úÖ Custom System Enabled!', 'Custom notifications are now active and will bypass all browser restrictions.');
                showCustomNotification('üéâ Custom Notifications Active!', 'This notification system works without any browser permissions and bypasses popup blockers completely!');

                // Update status
                showStatus('custom-notification-status', '‚úÖ Custom notification system enabled! Polling every 15 seconds. Use "Stop Notifications" to stop.', 'success');                // Start polling for new notifications (simulate real-time)
                startCustomNotificationPolling();
            } catch (error) {
                console.error('Custom system error:', error);
                showStatus('custom-notification-status', `‚ùå Custom system error: ${error.message}`, 'error');
            }
        }

        function stopCustomNotificationSystem() {
            // Stop polling
            if (notificationPollingInterval) {
                clearInterval(notificationPollingInterval);
                notificationPollingInterval = null;
            }

            // Update system state
            customNotificationSystem = false;
            localStorage.removeItem('jcai-custom-notifications');

            // Clear any existing notifications
            const existingToasts = document.querySelectorAll('.toast-notification');
            existingToasts.forEach(toast => toast.remove());

            const existingCustom = document.querySelectorAll('.custom-notification');
            existingCustom.forEach(notif => notif.remove()); showStatus('custom-notification-status', 'üõë Custom notification system stopped successfully!', 'success');
            console.log('üõë Custom notification system stopped');
        }

        function startCustomNotificationPolling() {
            // Clear any existing polling first
            if (notificationPollingInterval) {
                clearInterval(notificationPollingInterval);
            }

            // Poll for new notifications every 15 seconds (less frequent to avoid spam)
            notificationPollingInterval = setInterval(async () => {
                if (localStorage.getItem('jcai-custom-notifications') === 'enabled' && customNotificationSystem) {
                    try {
                        const response = await fetch(`${API_BASE}/notifications/browser/pending/${TEST_USER_ID}`);
                        const data = await response.json();

                        if (data.notifications && data.notifications.length > 0) {
                            data.notifications.forEach((notification, index) => {
                                // Only show the first notification to avoid spam
                                if (index === 0) {
                                    showToastNotificationWithClick(notification.title, notification.body, notification);
                                }
                            });
                        }
                    } catch (error) {
                        console.log('Polling error (normal if server offline):', error.message);
                    }
                }
            }, 15000);

            console.log('üîÑ Custom notification polling started (every 15 seconds)');
        }

        function testCustomNotificationWorkflow() {
            showStatus('custom-notification-status', 'üß™ Testing complete custom notification workflow...', 'info');

            // Step 1: Show we can create notifications without permission
            showCustomNotification('üìã Step 1: Inline Notification', 'This shows without any browser permission!');

            setTimeout(() => {
                // Step 2: Show toast notification
                showToastNotification('info', 'üìã Step 2: Toast Notification', 'This also works without browser permission!');

                setTimeout(() => {
                    // Step 3: Test server integration
                    createTestNotification().then(() => {
                        showToastNotification('success', 'üìã Step 3: Server Integration', 'Backend notifications also work!');
                        showStatus('custom-notification-status', '‚úÖ Complete custom workflow tested successfully!', 'success');
                    });
                }, 1500);
            }, 1500);
        }

        async function checkAllNotificationSystems() {
            showStatus('system-status', 'üîç Checking all notification systems...', 'info');

            const results = {
                browserNotifications: false,
                customDivNotifications: true, // Always works
                toastNotifications: true, // Always works
                inlineNotifications: true, // Always works
                serverConnectivity: false,
                popupBlocker: false
            };

            // Check browser notifications
            if ('Notification' in window) {
                results.browserNotifications = Notification.permission === 'granted';
            }

            // Test popup blocker
            try {
                const testWindow = window.open('', '_blank', 'width=1,height=1');
                if (!testWindow || testWindow.closed || typeof testWindow.closed == 'undefined') {
                    results.popupBlocker = true;
                } else {
                    testWindow.close();
                }
            } catch (e) {
                results.popupBlocker = true;
            }

            // Test server connectivity
            try {
                const response = await fetch(`${API_BASE}/health`);
                results.serverConnectivity = response.ok;
            } catch (error) {
                results.serverConnectivity = false;
            }

            // Display results
            let message = 'üìä System Status Report:\n\n';
            message += `üîî Browser Notifications: ${results.browserNotifications ? '‚úÖ Working' : '‚ùå Not available'}\n`;
            message += `üì± Custom DIV Notifications: ${results.customDivNotifications ? '‚úÖ Working' : '‚ùå Failed'}\n`;
            message += `üçû Toast Notifications: ${results.toastNotifications ? '‚úÖ Working' : '‚ùå Failed'}\n`;
            message += `üìã Inline Notifications: ${results.inlineNotifications ? '‚úÖ Working' : '‚ùå Failed'}\n`;
            message += `üåê Server Connectivity: ${results.serverConnectivity ? '‚úÖ Connected' : '‚ùå Offline'}\n`;
            message += `üö´ Popup Blocker: ${results.popupBlocker ? '‚ö†Ô∏è Active (blocking permission requests)' : '‚úÖ Not blocking'}\n\n`;

            // Recommendations
            message += 'üí° Recommendations:\n';
            if (!results.browserNotifications && results.popupBlocker) {
                message += '‚Ä¢ Use "Enable Custom System" to bypass all restrictions\n';
                message += '‚Ä¢ Custom notifications work perfectly without permissions\n';
            } else if (!results.browserNotifications) {
                message += '‚Ä¢ Try "Smart Permission Request" with debugging\n';
                message += '‚Ä¢ Use custom notifications as reliable fallback\n';
            } else {
                message += '‚Ä¢ All systems working! Browser notifications are fully functional\n';
            }

            showStatus('system-status', message, results.browserNotifications ? 'success' : 'info');

            // Update detailed list
            const systemList = document.getElementById('system-list');
            systemList.innerHTML = '';

            Object.entries(results).forEach(([system, working]) => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${system}</strong>: ${working ? '‚úÖ' : '‚ùå'}`;
                li.style.color = working ? '#155724' : '#721c24';
                systemList.appendChild(li);
            });

            document.getElementById('system-details').style.display = 'block';
        }

        // Debug functions
        function debugToastTest() {
            showToastNotification('info', 'üß™ Debug Toast Test', 'If you see this toast, the debug function is working!');
            showStatus('debug-status', '‚úÖ Toast test executed. Check top-right for the toast notification.', 'success');
        }

        function debugConsoleTest() {
            console.log('üìù Debug Console Test - This is a test message from the debug function.');
            showStatus('debug-status', '‚úÖ Console test executed. Check console for the message.', 'success');
        }

        function debugContainerTest() {
            const container = document.querySelector('.container');
            container.style.border = '5px dashed #fd7e14';
            container.style.padding = '25px';
            container.style.transition = 'transform 0.3s ease';
            container.style.transform = 'scale(1.02)'; setTimeout(() => {
                container.style.transform = 'scale(1)';
            }, 300); showStatus('debug-status', '‚úÖ Container test executed. Check the container for visual changes.', 'success');
        }

    </script>
</body>

</html>
